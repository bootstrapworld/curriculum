# last modified 2022-10-18


if test -z "$BOOTSTRAPWORLD_GITHUB_IO_DIR"; then
  BOOTSTRAPWORLD_GITHUB_IO_DIR=~/src/bootstrapworld.github.io
fi

cd $BOOTSTRAPWORLD_GITHUB_IO_DIR

CURRBRANCH=$(git branch --show-current)
UNTRACKEDFILES=.my-untracked-files
SAVEDGITCONFIG=.my-orig-git-config

mv .git/config $SAVEDGITCONFIG

git ls-files --others --exclude-standard -z > $UNTRACKEDFILES

rm -fr .git

git init -b $CURRBRANCH
git add .

mv $SAVEDGITCONFIG .git/config

cat $UNTRACKEDFILES | xargs -r0 git rm --cached

rm $UNTRACKEDFILES

git commit -m "sole commit"

git push -u origin $CURRBRANCH
