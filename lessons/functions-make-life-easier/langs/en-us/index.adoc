= Functions Make Life Easier!

@description{Students discover that they can make their own functions.}

@lesson-prereqs{contracts}

@keywords{}

[@lesson-intro-table]
|===

| Lesson Goals
| Students will be able to:

* identify patterns where a function would be useful
* define their own function

| Student-Facing Lesson Goals
|
* I can explain why a function is useful.
* I can write my own function.

| Materials
|[.materials-links]

@ifproglang{wescheme}{
* @link{https://docs.google.com/presentation/d/1B9mESkR0VtlWSF712C0p35d0fNF1kiv_Ar33wIK297c/, Lesson Slides}
}
@ifproglang{pyret}{
* @link{https://docs.google.com/presentation/d/1f58vvHsNgb-YumWEBH_J6o0L3Pc7AacBw-UxvCbYYIs/, Lesson Slides}
}

@material-links

| Preparation
|
@preparation


| Key Points for the Facilitator
|
* This lesson represents a _big_ shift in thinking.  After some practice, students will not be limited to pre-existing functions!

@lang-prereq

|===

== There's Got to Be a Better Way!	 @duration{15 minutes}

=== Overview
@ifpathway{algebra, ok}{
Students have already searched for structure in a list of expressions in order to define values.
}
In this lesson, students will build their flexibiltiy of thinking by engaging with multiple representations. Students will search for structures that are _dynamic_, meaning they change in a predictable way. This is the foundation for defining functions.

=== Launch

Students should have their workbook, pencil, and be logged into
@ifproglang{wescheme}{ @link{https://www.wescheme.org, WeScheme     } }
@ifproglang{pyret}{    @link{https://code.pyret.org, code.pyret.org } }
on their computer.

@centered-image{images/ILoveGreenTriangles.jpg, I Love Green Triangles, 400, align="center"}

@centered-image{images/GreenTriangle.jpg, I Love Green Triangles, 400, align="center"}

This is a fun lesson to make silly! Dramatically confess to your students, "I LOVE green triangles!" Challenge them to use the Definitions Area to code as many unique, solid, green triangles as they can in 2 minutes.

Walk around the room and give positive feedback on the green triangles. When the time is up, ask for some examples of green triangles that they wrote and copy them to the board.

[.indentedpara]
--
For example:

@show{(sexp->code '(triangle  30  "solid" "green"))}

@show{(sexp->code '(triangle  12  "solid" "green"))}

@show{(sexp->code '(triangle 500  "solid" "green"))}
--

- *Is there a pattern?*
_Yes, the code mostly stayed the same with one change each time._

- *What stayed the same?*
_The function name `triangle`, "solid", "green"._

- *What changed?*
_The size of the `triangle`, or the Number input._

- *How many of you typed out the code from scratch each time? How many triangles were you able to code in a minute?*
_Write this down so that you can compare to it later!!!_

- *Did you know that there is a keyboard shortcut for making the previous line of code reappear in the interactions area?*
@ifproglang{wescheme}{_alt/option up-arrow_}
@ifproglang{pyret}{_up-arrow_}

=== Investigate

[.lesson-instruction]
--
@ifpathway{algebra, ok}{

Our programming language allows us to define *values*. This lets us create "shortcuts" to reuse the same code over and over.

For example:
@show{(sexp->code '(define PRIZE-STAR (star 65 "solid" "pink")))}

This code will let us write `PRIZE-STAR` wherever we want that same solid, pink star - without having write all the code again and again.

*But to make a shortcut that _changes_ such as creating solid, green triangles of a changing size, we need to define a _function_.*
}

Suppose we want to define a shortcut @vocab{function} called `gt`. When we give it a number, it makes a solid green triangle of whatever size we give it.
What will _@show{(sexp->code '(gt 5))}_ produce?
_@show{(sexp->code '(triangle 5 "solid" "green"))}!_
--

Select a student to _act out_ `gt`. Make it clear to the class that their Name is "gt", they expect a Number, and they will produce an Image.

[.lesson-instruction]
--
Just as with any acting career, this one will begin with a rehearsal.

When I say, "*gt 5!*", you say, "*triangle 5 solid green!*"

Let' try it.
--

- You say: *gt 5!*
+
The student responds: _@show{(sexp->code '(triangle 5 "solid" "green"))}!_
+
*Note: Have the actor ignore the punctuation, and just say "triangle 5 solid green!"*
- You say: *gt 20!*
+
The student responds: _@show{(sexp->code '(triangle 20 "solid" "green"))}!_
- You say: *gt 200!*
+
The student responds: _@show{(sexp->code '(triangle 200 "solid" "green"))}!_
- You say: *gt 99!*
+
The student responds: _@show{(sexp->code '(triangle 99 "solid" "green"))}!_

[.lesson-instruction]
--
That was a great rehearsal. You're ready for the stage! Now it's the class' turn to give you cues! Who's got a `gt` expression for our actor?
--

Go around the room soliciting `gt` expressions from students until it's clear that everyone could run this script in their sleep.

=== Synthesize

Thank your volunteer. Assuming they did a wonderful job, ask them:

* How did you get to be so speedy at building green triangles? You seemed so confident! _Ideally they'll tell you that they had good instructions and that it was easy to follow the pattern_

[.lesson-instruction]
--
Just as we were able to give our volunteer instructions that let them take in `gt 20` and give us back

@show{(sexp->code '(triangle 20 "solid" "green"))}, we can define any function we'd like in the *Definitions Area*.
--

== Identifying and Describing the Pattern @duration{flexible}

=== Overview
Students will see look for what's changing in the examples, label it with a variable and use that information to write a function definition. Students will also think about how the Domain of `gt` differs from the Domain of `triangle`. By the end of the lesson they will have defined other functions and matched function definitions to example blocks.

=== Launch

[.lesson-instruction]
--
We need to program the computer to be as smart as our volunteer. But how do we do that?

In order to define a function, we need to identify what's changing and what stays the same.
Let's take a look at some examples for `gt`.
--

[.center]
--
@show{(sexp->code '(gt 5))} --> @show{(sexp->code '(triangle 5 "solid" "green"))}

@show{(sexp->code '(gt 10))} --> @show{(sexp->code '(triangle 10 "solid" "green"))}

@show{(sexp->code '(gt 25))} --> @show{(sexp->code '(triangle 25 "solid" "green"))}

@show{(sexp->code '(gt 100))} --> @show{(sexp->code '(triangle 100 "solid" "green"))}

@show{(sexp->code '(gt 220))} --> @show{(sexp->code '(triangle 220 "solid" "green"))}
--

[.lesson-instruction]
- What's Changing? _The size. Everything else is the same in every single example!_ *Highlight or circle the numbers in the gt column and in the triangle column to help students see that they're the only thing changing!*
- We can define our function by replacing the numbers that change with a variable that describes them. In this case, `size` would be a logical variable.
*Draw arrows to the two highlighted columns and label them with th word size.*

@center{@show{(sexp->code '(gt size))} --> @show{(sexp->code '(triangle size "solid" "green"))}}

The way we write this in the editor is

@center{@show{(sexp->code '(define (gt size)(triangle size "solid" "green")))}}

Have students turn to @printable-exercise{gt-domain-debate.adoc} and "decide and defend" whether Kermit's assertion that __The domain of ``gt`` is ``Number, String, String``__ or Oscar's assertion that __The domain of ``gt`` is ``Number``__ is correct.

[.lesson-instruction]
--
In the case of `gt`, the domain was a number and that number stood for the `size` of the triangle we wanted to make. Whatever number we gave `gt` for the size of the triangle is the number our volunteer inserted into the `triangle` function. Everything else stayed the same no matter what!

Why might someone think the domain for `gt` contains a Number and two Strings? _The function `gt` only needs one Number input because that's the only part that's changing. The function `gt` makes use of `triangle`, whose Domain is Number String String, but `gt` already knows what those strings should be._
--
Have students open the @starter-file{gt} and click run.

[.lesson-instruction]
- Evaluate @show{(sexp->code '(gt 10))} in the Interactions Area.
- What did you get back? _a little green triangle!_
- Take one minute and see how many different green triangles you can make using the `gt` function.
- How many were you able to make?
- How did making green triangles with `gt` compare to making them with our previous strategy?

=== Investigate

[.lesson-instruction]
--
We've successfully defined a function to satisfy my love of green triangles, but other people have other favorite shapes and we need to be able to meet their needs, too. Let's take what we've learned to define some other functions.

What if we wanted to define a function `rs` to make solid red squares of whatever size we give them?

Have students turn to @printable-exercise{rs.adoc}.
--
[.strategy-box, cols="1", grid="none", stripes="none"]
|===

|@span{.title}{Connecting to Best Practices}

Writing examples and identifying the variables lays the groundwork for writing the function, which is especially important as the functions get more complex.  It's like "showing your work" in math class. Don't skip this step!
|===


As students work, walk around the room and make sure that they are circling what changes in the examples and labeling it with a variable name that reflects what it represents.

=== Synthesize
[.lesson-instruction]
- Why is defining functions useful to us as programmers?
- Functions can consume values besides Numbers. What other data types did you see being consumed by these functions?
