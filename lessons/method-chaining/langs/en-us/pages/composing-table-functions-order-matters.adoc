= Composing Table Functions: Order Matters!

You have the following functions defined below (read them _carefully!_):

  fun is-female(r): r["sex"] == "female"  end
  fun kilograms(r): r["pounds"] / 2.2     end
  fun is-heavy(r):  r["kilos"] > 25       end

The table `t` below represents four animals from the shelter:

[cols='5',options="header"]
|===
| name        | sex       | age   | fixed   | pounds
| `"Toggle"`  | `"female"`| `3`   | `true`  | `48`
| `"Fritz"`   | `"male"`  | `4`   | `true`  | `92`
| `"Nori"`    | `"female"`| `6`   | `true`  | `35.3`
| `"Maple"`   | `"female"`| `3`   | `true`  | `51.6`

|===

_Match_ each Pyret expression (left) to the description of what it does (right). *Note: one description might match multiple expressions!*

[.FillVerticalSpace, cols=".^10a,^.^2a,3,^.^1a,.^8a",stripes="none",grid="none",frame="none"]
|===

|
----
sort(t, "kilos", true)
----
|*@n*@ifsoln{(D)} ||*A*
| Produces a table containing Toggle, Nori and Maple, with an extra column showing their weight in kilograms

|
----
build-col(
  filter(t, is-female),
  "kilos",
  kilograms)
----
|*@n*@ifsoln{(A)} ||*B*
| Produces a table containing Maple, Nori and Toggle (in that order)

|
----
filter(
  build-col("kilos", kilograms),
  is-heavy)
----
|*@n*@ifsoln{(C)} ||*C*
| Produces a table containing only Fritz.

|
----
build-col(
  filter(is-heavy),
  "kilos",
  kilograms)
----
|*@n*@ifsoln{(D)} ||*D*
| Wonâ€™t run: will produce an error (if so, why?)

|
----
sort(
  filter(
    build-column(t, "kilos", kilograms),
    is-heavy),
  "sex",
  true)
----
|*@n*@ifsoln{+(C)+} ||*E*
| Produces a table containing only Fritz, with two extra columns.

|
----
filter(
  build-col(
    build-col(t, "female", is-female)
    "kilos",
    kilograms)
  is-heavy)
----
|*@n*@ifsoln{(E)} ||*F*
| Produces a table containing Maple and Fritz

|===

