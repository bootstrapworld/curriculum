= Chinese Flag
++++
<style>
  table { margin-top: 5px; }
  table .listingblock pre { font-size: 9pt; margin-bottom: 0 !important; }
  td img { margin-bottom: 15px; }
  td { padding: 0 !important; }
  td .autonum::after { content: ')' !important; }
</style>
++++

The code on the left defines an image value called `china`, which is shown on the right.

[cols="5a,.^3a", frame="none", grid="none"]
|===

|

----
@ifproglang{pyret}{
china =
  put-image(
    rotate(40,star(15,"solid","yellow")),
    120, 175,
    put-image(
      rotate(80,star(15,"solid","yellow")),
      140, 150,
      put-image(
        rotate(60,star(15,"solid","yellow")),
        140, 120,
        put-image(
          rotate(40,star(15,"solid","yellow")),
          120, 90,
          put-image(scale(3,star(15,"solid","yellow")),
            60, 140,
            rectangle(300, 200, "solid", "red"))))))
}

@ifproglang{wescheme}{
(define china
  (put-image
     (rotate 40 (star 15 "solid" "yellow"))
     120 175
     (put-image
       (rotate 80 (star 15 "solid" "yellow"))
       140 150
       (put-image
          (rotate 60 (star 15 "solid" "yellow"))
          140 120
          (put-image
             (rotate 40 (star 15 "solid" "yellow"))
             120 90
             (put-image
                (scale 3 (star 15 "solid" "yellow"))
                60 140
                (rectangle 300 200 "solid" "red")))))))
}
----

| @centered-image{../images/china-flag.png, 300}

@n What image do you see repeated in the flag? @fitb{}{@ifsoln{small yellow stars}}

@vspace{1ex}

@n In the code on the left, **highlight or underline** every place you see the repeated expression. +
  @ifsoln{students should highlight or circle:} @showsoln{(code '(star 15 "solid" "yellow")) }

|===

@n Write the code to **define a value** for the repeated expression.

@fitb{}{@showsoln{(code '(define yellow-star (star 15 "solid" "yellow"))) }}

@n Open the @starter-file{flags-china}, *save a copy* and click "Run". **Simplify the code**, replacing the repeated expressions with the value you defined. Do you still get the same image when you click "Run"? If not, check your work.

@n Change the color of all the stars to black, then change their size to 20. Would this have been easier with the original code? Why or why not? @fitb{}{@ifsoln{The original code would have been harder, because the change needed to be made in many places.}}

@n Here is the same code shown above, but all crammed into one line.

@show{(code '(define china
  (put-image
     (rotate 40 (star 15 "solid" "yellow"))
     120 175
     (put-image
       (rotate 80 (star 15 "solid" "yellow"))
       140 150
       (put-image
          (rotate 60 (star 15 "solid" "yellow"))
          140 120
          (put-image
             (rotate 40 (star 15 "solid" "yellow"))
             120 90
             (put-image
                (scale 3 (star 15 "solid" "yellow"))
                60 140
                (rectangle 300 200 "solid" "red"))))))))}

@hspace{1em}Is it easier or harder to read, when everything is all on one line? @fitb{}{@ifsoln{Much harder!}}

@n Professional programmers _indent_ their code, by breaking long lines into shorter, more readable lines of code. In the indented code at the top of the page, notice that each `put-image` is followed by several lines of code that all line up with each other, and that the lines under the _next_ `put-image` are shifted farther and farther to the right. What do you think is going on?

@fitb{}{@ifsoln{The lines under each `put-image` are all inputs to that function.}} +
@fitb{}{@ifsoln{Each new `put-image` happens _inside_ the one that comes before it, so the inputs shift farther and farther to the right}} +
@fitb{}{} +
@fitb{}{}

@star This file uses a function we havenâ€™t seen before! What is its name? @fitb{9em}{@ifsoln{`put-image`}}_Hint: Focus on the last instance of the function._  +
How many inputs are in its domain? @fitb{4em}{@ifsoln{4}}. What are the types of those inputs? @fitb{}{@ifsoln{Image, Number, Number, Image}}
