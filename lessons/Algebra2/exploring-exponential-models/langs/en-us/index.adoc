= Exploring Exponential Models

@description{Students investigate exponential relationships in data about Covid spread, using an inquiry-based model of sense-making, hypothesizing, modeling and testing. They are introduced to table transformations and inverse functions, which are used to fit exponential models onto nonlinear data.}

@lesson-prereqs{exploring-quadratic-models}

@keywords{quadratic, square, coefficient}

[@lesson-intro-table]
|===

| Lesson Goals
| Students will be able to...

* Read and interpret real-world data, presented in a scatter plot
* Model exponential relationships using functions

| Student-facing Lesson Goals
|

* Let's use Pyret to model exponential relationships in data
* Let's use Pyret to filter a dataset into subsets

| Materials
|[.materials-links]
@material-links

| Preparation
|
* All students should pull up their @online-exercise{program-list} and, open the @online-exercise{https://code.pyret.org/editor#share=1ueyf5-0ByVYmeJKQ03i9msb9u1C5y50o, Covid Spread Starter File}.

| Key Points For The Facilitator
|
* TBD
|===

== Looking for Patterns @duration{20 minutes}

=== Overview
Students explore the @online-exercise{https://code.pyret.org/editor#share=1ueyf5-0ByVYmeJKQ03i9msb9u1C5y50o, Covid Spread Starter File}, and create scatter plots to search for relationships between columns. They share and discuss their findings with the class.

=== Launch

[.lesson-instruction]
- Open the @online-exercise{https://code.pyret.org/editor#share=1ueyf5-0ByVYmeJKQ03i9msb9u1C5y50o, Covid Spread Starter File}
- From the File menu, select "Save a Copy", and click "Run"
- Working in pairs or small groups, complete questions 1-8 of @printable-exercise{exploring-covid.adoc}

Review student answers to confirm that students have made a number of observations:
* There is _more than one_ relationship in this dataset!
* Every relationship seems extremely strong
* Every relationship appears non-linear

=== Investigate

This dataset has two interesting challenges for us. While it's clear that there are patterns in the data, it's almost like there are multiple, totally-distinct patterns for us to explore! Each relationship appears very strong, almost as if there are five separate models happening at the same time.

It's going to be hard to fit a single model onto all these different relationships!

[.lesson-instruction]
- We need to break this dataset up into _grouped samples_, so that all of the data for Rhode Island is in one table, all of the data for Maine is in another, etc.
- Working in pairs or small groups, complete the rest of of @printable-exercise{exploring-covid.adoc}.

By now you've all had a chance to experiment with a new tool in Pyret called `filter`. How does this function work?
** __The `filter` function consumes a Table and **a helper function!** The helper function is used on every Row of the Table, producing true or false. The `filter` function takes all the Rows for which the helper produced true, and combines them all into a new table.__

Datasets like these are impossible to model all at once, because there will always be lots of points that are far from any single function. But it's not that there's no correlation! Instead, we have several sub-groups each with their own _very strong correlation!_

[.lesson-point]
Simpson's Paradox: trends that are clearly present in sub-groups _disappear_ or _reverse_ when the groups are combined.

Normally we think that "more data means more power!", and that the more data we include in our sample the more clearly we'll see any potential correlations. But in certain circumstances - like in our covid dataset! - the correlations in our sub-groups cancel each other out when we put the groups together! This is called Simpson's Paradox, and you can learn more at @link{https://en.wikipedia.org/wiki/Simpson%27s_paradox, Wikipedia}.

Fortunately, we can use `filter` to split our dataset into multiple sub-groups, and then fit models to each sample.

[.lesson-instruction]
Create helper functions to filter at least three other states, then use them to define the covid tables for each state.

=== Common Misconceptions

It's extremely common for students to think that filtering a table *changes the original table*. This is NOT how it works in Pyret! Instead, the `filter` function always produces a _new_ table, containing only the Rows for which the supplied function evaluates to `true`

=== Synthesize

- Why aren't linear models working for us?
- What else could we try?

== Fitting Exponential Models @duration{35 minutes}

=== Overview

Students are introduced to exponential models, and extend their sampling techniques to exponential relationships.

=== Launch



=== Investigate




=== Synthesize

