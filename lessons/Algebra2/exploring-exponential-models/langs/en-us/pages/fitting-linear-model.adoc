= Fitting a Linear Model
++++
<style>
body.workbookpage td .autonum::after { content: ')' !important; }
td:last-child { padding-top: 0; padding-bottom: 0; }
body .center { padding: 0; }

/* Push content to the top (instead of the default vertical distribution), which was leaving empty space at the top. */
#content { display: block !important; }
</style>
++++

[.linkInstructions]
For this page, you'll need to have the @starter-file{alg2-covid} open on your computer. If you haven't already, select *Save a Copy* from the "File" menu to make a copy of the file that's just for you.

== lr-plot

Use `lr-plot` to obtain the best-possible linear model for the relationship between `day` and `positive` in the `covid-table`.

@n What do you notice about the line? @fitb{}{} 

@fitb{}{}

@n The optimized linear model for this dataset shows an @fitbruby{12em}{@ifsoln{increase}}{increase / decrease} of about @fitbruby{}{@ifsoln{299 case per day.}}{slope} 

@indented{
The @vocab{S-value} is about @fitbruby{9em}{@ifsoln{5.80e4 = 58000}}{S} and @fitbruby{9em}{@ifsoln{positive cases}}{units} in this dataset range from @fitbruby{7em}{@ifsoln{3}}{lowest y-value} to @fitbruby{8em}{@ifsoln{341925}}{highest y-value}, so there is @fitbruby{17em}{@ifsoln{significant}}{insignificant / reasonable / significant / extreme} error in predictions made using this model.
}

== Filtering by State

@n Find the function called `is-MA` in the Definitions Area under "Define some helper functions" and read the comments carefully!

@indented{
+a.+ What is the Domain of `is-MA`? @fitb{20em}{@ifsoln{Row}} What is its Range? @fitb{}{@ifsoln{Boolean}}

+b.+ What do you _think_ @show{(code '(is-MA MA1))} will evalute to? @fitb{7em}{@ifsoln{true}}. @show{(code '(is-MA CT1))}? @fitb{7em}{@ifsoln{false}}. @show{(code '(is-MA ME1))}? @fitb{}{@ifsoln{false}}
}

@vspace{1ex}

_Try typing each of these helper functions into the Interactions Area on the right and confirm you were correct._

@n Find `MA-table` in the Definitions Area under "Define some grouped and/or random samples". 

@indented{
+a.+ What is that code doing? @fitb{}{} 
@fitb{}{@ifsoln{Defining a new table called `MA-table`, which is all the rows from our original table where state is "MA"}}

+b.+ Type `MA-table` into the Interactions Area. What does it evaluate to? @fitb{}{@ifsoln{A Table just for data from Massachusetts}}
}

@n Use `lr-plot` to obtain the best-possible linear model for the relationship between `day` and `positive` in the `MA-table`.

@indented{
The optimized linear model for this dataset shows an @fitbruby{12em}{@ifsoln{increase}}{increase / decrease} of about @fitbruby{}{@ifsoln{846 case per day.}}{slope} 

The @vocab{S-value} is about @fitbruby{9em}{@ifsoln{3.18e4 = 31800}}{S} and @fitbruby{9em}{@ifsoln{positive cases}}{units} in this dataset range from @fitbruby{7em}{@ifsoln{104,667}}{lowest y-value} to @fitbruby{8em}{@ifsoln{341925}}{highest y-value}, so there is @fitbruby{17em}{@ifsoln{significant}}{insignificant / reasonable / significant / extreme} error in predictions made using this model.

How does it compare to the model you made for the full `covid-table`? @fitb{}{@ifsoln{It's a little better, but not much.}}
}

@n *Define a new function* `is-VT` and *create a grouped sample* called `VT-table`, using the code for `is-MA` and `MA-table` as a model. +

@n Use `lr-plot` to obtain the best-possible linear model for the relationship between `day` and `positive` in the `VT-table`.

@indented{
The optimized linear model for this dataset shows an @fitbruby{12em}{@ifsoln{increase}}{increase / decrease} of about @fitbruby{}{@ifsoln{21 case per day.}}{slope}

The @vocab{S-value} is about @fitbruby{9em}{@ifsoln{826}}{S} and @fitbruby{9em}{@ifsoln{positive cases}}{units} in this dataset range from @fitbruby{7em}{@ifsoln{1092}}{lowest y-value} to @fitbruby{8em}{@ifsoln{6781}}{highest y-value}, so there is @fitbruby{17em}{@ifsoln{significant}}{insignificant / reasonable / significant / extreme} error in predictions made using this model.

How does it compare to the other models you just made? @fitb{}{@ifsoln{It's not as good as the model for MA.}}
}
