= Modeling Historical Carbon Dioxide Levels
++++
<style>
/* Tweak padding to save vertical height */
td, .center { padding: 0 !important; }

/* Make code more visible */
td .codetwo { color: black; background: none; }

/* Shorten fill in the blanks */
.fitb { min-width: 2em; padding-top: 1rem; }
.studentAnswerMedium { min-width: 70pt !important; }
</style>
++++

@define{COtwo}{@math{\text{CO}_2}}
@do{
(define-values (hi lo lo-dateA lo-dateB) (values 424 415.74 2022.708 2023.708))
(define p (abs (- lo-dateA lo-dateB)))
(define a 4.13)
(define b 6.28)
(define c 419.87)
(define d 2023.1)
}

@link-instructions{
For this page, we are going to work with the data in the `co2-table` of the @starter-file{alg2-hybrid}, which tracks the amount of @COtwo in the atmosphere (parts per million) from 1974 to 2023.
}

== Fitting a Linear Model

@n Use `lr-plot` to find the best linear model for the `co2-table`. What is its @math{S}-value? @fitbruby{15em}{@ifsoln{3.425}}{parts per million}

@n Write the function below (in Pyret and Function Notation):

[cols=".^1a, ^.^12a", frame="none", stripes="none"]
|===
| *Function Notation*
|
@math{\text{linear}(x) =} @fitbruby{70pt}{@ifsoln{1.8345}}{slope}x + @fitbruby{10em}{@ifsoln{-3296}}{y-intercept / vertical shift}
| *Pyret Notation*
| @show{(code '(define (linear x) (+ (* (?ANS 1.8345) x)(?ANS -3296))))}
|===


== Fitting your Periodic Model
@link-instructions{Make sure the `periodic` model defined in @starter-file{alg2-hybrid} matches what you recorded on @printable-exercise{periodic3-fitting-models/pages/modeling-recent-co2.adoc}}.

@n Use `fit-model` to find the @vocab{S-value} of your `periodic` model for the `co2-table`. @fitb{}{@ifsoln{~55.89 part per million}} 

== Comparing Models

@n Which model is better, the `linear` model or the `periodic` model? @fitb{}{@ifsoln{linear}}
@n How much
@fitbruby{7em}{@ifsoln{less}}{more / less }
error do we expect in predictions made with the `linear` model than predictions made with the `periodic` model?

@vspace{1ex}

@scrub{
A note for future authors:
- {&#8192;} is used below to add horizontal space.
- \mbox{} is used to make the words in the fraction use normal font.
}

@indented{
Percent Change &#8192; = &#8192;
@math{
\frac{&#8192; \mbox{Difference} &#8192; \mbox{between} &#8192; \mbox{the} &#8192; \mbox{S-values}&#8192;}
{\mbox{S-value} &#8192; \mbox{for} &#8192; \mbox{linear} &#8192; \mbox{model}}
\times 100 &#8192; = &#8192; }
@ifnotsoln{@math{\frac{\qquad}{\qquad}}}
@ifsoln{@math{\frac{52.465}{55.89} = 0.9387  &#8192; &rarr; &#8192;  ~94 \%}}
}

We expect predictions made with the ``linear` model to have
@fitb{4em}{@ifsoln{~94}} percent
@fitbruby{7em}{@ifsoln{less}}{ more / less }
error than predictions made with the `periodic` model!
