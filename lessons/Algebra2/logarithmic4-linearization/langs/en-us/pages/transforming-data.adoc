= Transforming the Data
////
* Import Desmos Styles
*
* This includes some inline CSS which loads the Desmos font,
* which includes special glyphs used for icons on Desmos.com
*
* It also defines the classname '.desmosbutton', which is used
* to style all demos glyphs
*
* Finally, it defines AsciiDoc variables for glyphs we use:
* {points}
* {caret}
* {magnifying}
* {wrench}
*
* Here's an example of using these:
* This is a wrench icon in desmos: [.desmosbutton]#{wrench}#
////

@include{fragments/desmos.adoc}

++++
<style>
/* Shrink vertical spacing on fitbruby */
.fitbruby{ padding-top: 0.5rem; }
td .fitb { text-align: left; }

/* Add some left-and-right margins to code-style font */
.editbox { margin: 0 3px !important; }

table.nomargin { margin-bottom: 0 !important; }
table.nomargin td { 0 0.5em !important }
</style>
++++

@n The Desmos file we are about to work with contains two tables. Let's take a moment to compare them.

[cols="1a,1a,3a", options="header", frame="none", grid="none", stripes="none"]
|===
| Wealth vs. Health
| Log(Wealth) vs. Health
| What do you Notice or Wonder?

| @image{../images/cropped-wealth-v-health-table.png, 110}
| @image{../images/cropped-log-wealth-v-health-table.png, 110}
| 
@blanklines{5}{
@ifsoln{The 2nd columns are the same, but the 1st columns are really different. The header for the x-column of the 2nd table is a _function_ that takes in the @math{x_1}-value from the first table. The first table is the same one we've seen before.}
}

|===

== Fitting a Model

@link-instructions{
Open *Slide 8: Scaling the axes from pc-gdp to log(pc-gdp)* of *Fitting Wealth-v-Health and Exploring Logarithmic Models (Desmos)*.

This slide contains two folders. (You can look inside either of them by clicking ([.desmosbutton]#{caret}#).) You should find: 

[.nomargin, cols="2a,5a,3a", frame="none"]
|===
| 
`Wealth vs. Health` 

- the same table we've seen before

|
`Log(Wealth) vs. Health` 

-  **@math{g(x)}** -- a function that takes in a number @math{x}, and produces @math{log_{10}(x)}
-  a new table!
  * _@math{x_2} uses @math{g(x)} on the @math{x_1} column in the first table._
  * _@math{y_2} is our copy of the @math{y_1} column in the first table._

|

Notice: When you first open the slide, you'll see that the red dots from the original `Wealth vs. Health` table are dispersed on the graph exactly as they were on Slide 5!

|===

}

@n Let's take a look at our new data.

- Click on the ([.desmosbutton]#{folder}#) in front of the `Wealth vs. Health` folder to hide the red data points.
- Click on the circle in front of the `Log(Wealth) vs. Health` folder to turn ON the points from its table.

How does the new point cloud look different from the original? @fitb{}{@ifsoln{All the black datapoints are smashed against the y-axis!}}

@fitb{}{@ifsoln{Our log transformation is *really* drastic!}}

@n The x-axis is scaled to include data as large as 150000. Let's rescale it to optimally display this new dataset.

- Click on the  ([.desmosbutton]#{caret}#) to open the `Log(Wealth) vs. Health` and scroll to the bottom of the  table. 
- At the bottom left of the table you'll see a ([.desmosbutton]#{magnifying}#). Click on it to "zoom fit" the graph.

@n Transforming the *x-values* makes our data look @fitbruby{12em}{@ifsoln{linear}}{linear / quadratic / exponential}. Why? @fitb{}{@ifsoln{The amount of extra income needed to create an extra year of}}

@fitb{}{@ifsoln{predicted lifespan increased exponentially. By taking the log of that income we are "canceling out" that exponential growth and making it linear.}}

@n Scroll to the bottom. Use the sliders for @math{m} and @math{b} to find the best linear model you can: @hspace{1em} @math{f(x) = }@fitbruby{5em}{}{slope (m)}@math{x + }@fitbruby{11em}{}{y-intercept / vertical shift}

[.data-table, cols=".>2a,^1a,^1a", options="header", grid="none", frame="none", stripes="none"]
|===
3+^| Let's compare the model settings from your linear and logarithmic models.

| *Linear* (From above)
| @fitbruby{10em}{@ifsoln{~12 to ~16}}{slope (m)}
| @fitbruby{11em}{@ifsoln{~8 to ~25}}{y-intercept / vertical shift}

| *Logarithmic* (From @printable-exercise{logarithmic3-changing-scale/pages/fitting-logarithmic-models.adoc})
| @fitbruby{10em}{@ifsoln{~12 to ~16}}{log coefficient (a)}
| @fitbruby{10em}{@ifsoln{~8 to ~25}}{vertical shift (k)}
|===

@n How are they similar? @fitb{}{@ifsoln{The slope and log coefficients are similar... and the vertical shifts are similar. We changed the _kind_ of growth from}} +
@fitb{}{@ifsoln{logarithmic to linear, but not the _amount_.  Instead of increasing logarithmically by @math{a}, our new function increases _linearly_ by the slope.   }}
