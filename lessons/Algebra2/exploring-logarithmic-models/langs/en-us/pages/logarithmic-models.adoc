= Logarithmic Models

Open your copy of the @starter-file{alg2-countries} and click "Run".

@n Find the definition of `g(r)`. What does this function do? @fitb{}{@ifsoln{`g` produces the log of the `pc-gdp` column, which it gets from the country it's given}}

@fitb{}{}

@n At the end of the program, you'll find this code: 

[.indentedpara]
--
@vspace{1ex}

@show{(code '(define countries-transformed (build-column countries-table "log(pc-gdp)" g)))}

What do you think it does? @fitb{}{}

@fitb{}{@ifsoln{It defines a new table called `countries-transformed`, which is the result of building our new column,"log(pc-gdp)".}}

@vspace{1ex}

Click "Run", and evaluate `countries-transformed` in the Interactions Area on the right to test it out!

--

@n Use this new table to make an `lr-plot` comparing `log(pc-gdp)` and `median-lifespan` with `country` as the label.

@ifsoln{code students should type: lr-plot(countries-transformed, "country", "log(pc-gdp)", "median-lifespan")}

@n Record the regression line here: @math{y = } @fitbruby{10em}{@ifsoln{11.9011}}{slope} @math{x + } @fitbruby{10em}{@ifsoln{24.2636}}{vertical shift} @hspace{5em} @math{R^2:}@fitb{10em}{@ifsoln{0.66311}}

@vspace{1ex}

- At each point in our linear model, @math{y} is the _predicted median lifespan_, and @math{x} is the _log of per-capita gdp_. 
- But we want @math{x} to represent the **original, un-transformed** value, simply using _per-capita gdp_ as-is...
- We've learned that:

** the *slope* in the transformed, linear model is the same as the *growth factor* in the un-transformed logarithmic model
** the *vertical shift* in the transformed, linear model is the same as the *vertical shift* in the un-transformed logarithmic model

@n Use the values you calculated using `lr-plot` to complete the model: @math{logarithmic(x) =} @fitbruby{9em}{@ifsoln{11.9011}}{slope} @math{\times log(x) +} @fitbruby{9em}{@ifsoln{24.2636}}{growth factor}

@n Rewrite your model as a pyret definition: @ifnotsoln{`fun logarithmic(x):`@fitb{30em}{} `end`}  @showsoln{(code '(define (logarithmic x) (+ (* 11.9011 (log x)) 24.2636)))}

@n Add the definition to your starter file and click "Run" to load it.

@n Use `fit-model` to calculate the value of @math{R^2}: @fitb{}{}

@n How do you interpret this model? @fitb{}{}

@star Optional Exploration: Is the relationship between lifespan and income different for countries with universal healthcare than without it? `filter` this dataset into grouped samples for each, and find out!

@star Are there other relationships you can think of, which might be logarithmic?

@fitb{}{}

@fitb{}{}