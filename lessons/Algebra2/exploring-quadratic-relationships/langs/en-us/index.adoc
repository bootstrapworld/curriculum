= Exploring Quadratic Relationships

@description{Students investigate linear relationships in data about Fuel Efficiency, using an inquiry-based model of sense-making, hypothesizing, modeling and testing. They are introduced to table transformations and inverse functions, which are used to fit linear models onto nonlinear data.}

@lesson-prereqs{exploring-linear-relationships, lookups}

@keywords{quadratic, square, coefficient}

[@lesson-intro-table]
|===

| Lesson Goals
| Students will be able to...

* Read and interpret real-world data, presented in a scatter plot
* Model quadratic relationships using functions

| Student-facing Lesson Goals
|

* Let's use Pyret to model quadratic relationships in data


| Materials
|[.materials-links]
@material-links

| Preparation
|
* All students should log into @online-exercise{program-list} and, open the @online-exercise{https://code.pyret.org/editor#share=1RESEiKCepBRV3_AbthDydHaq5b9BN2zy, Fuel Efficiency Starter File}.

| Key Points For The Facilitator
|
* TBD
|===

== Exploring Fuel Efficiency @duration{15 minutes}

=== Overview
Students explore the @online-exercise{https://code.pyret.org/editor#share=1RESEiKCepBRV3_AbthDydHaq5b9BN2zy, Fuel Efficiency Starter File}, and create scatter plots to search for relationships between columns. They share and discuss their findings with the class, discovering the limitations of linear models.

=== Launch

[.lesson-instruction]
- Open the @online-exercise{https://code.pyret.org/editor#share=1RESEiKCepBRV3_AbthDydHaq5b9BN2zy, Fuel Efficiency Starter File}
- From the File menu, select "Save a Copy", and click "Run".
- Working in pairs or small groups, complete questions 1-6 of @printable-exercise{exploring-mpg.adoc}.

Review student answers:

- Did you see a pattern or relationship in this dataset?
** Yes
- If so, what is its @vocab{form}? Is it linear? Non-linear?
** Non-linear
- Is the correlation strong? Weak?
** Pretty strong
- What linear models did you try to fit? What kind of @math{R^2} did you get?


=== Investigate

There's definitely a relationship here. Even though some cars are more efficient than others, fuel efficiency generally increases from 15 to roughly 55mph. But after 55mph, fuel efficiency _decreases_ as cars get faster.

[.lesson-instruction]
- Let's try to build a linear model for this data!
- Working in pairs or small groups, complete the rest of of @printable-exercise{exploring-mpg.adoc}.

By now you've tried to fit quite a few linear models to this data, and we're not getting anywhere!

[cols="^.^1a,^.^1a,^.^1a", frame="none", stripes="none"]
|===
| We can build linear models that fit the "increasing" half of the data...
| We can build linear models that fit the "decreasing" half of the data...
| We can build linear models that try to split the difference...

| @image{images/fuel-efficiency-linear1.png}
| @image{images/fuel-efficiency-linear2.png}
| @image{images/fuel-efficiency-linear3.png}
|===

...but all of them are so far away from so many points, and our @math{R^2} is pretty bad.

=== Synthesize

- Why aren't linear models working for us?
- What else could we try?

== Quadratic Models @duration{20 minutes}

=== Overview

Students are introduced to quadratic models, and extend the sampling techniques from the linear models lesson into quadratic relationships.

=== Launch

Linear models are great for fitting simple relationships. But the real world isn't so simple, and more often than not linear models are just too primitive to handle that complexity.

Relationships that rise and then fall - or fall and then rise - are called @vocab{quadratic relationships}. They form shapes that look like arches, called parabolas. Sometimes the data only includes the _rising_ part of the parabola, and sometimes it only includes the _falling_ part. And of course, sometimes it includes both!

Quadratic relationships show up all the time!

- When an athlete is young, they steadily improve as they get stronger and more skilled. But as they age, they lose some of their speed and strength.
- A ball dropped from a tall building will steadily get faster and faster as it falls.
- Many nutrients are good for you, and the more you take the healthier you are...up to a point. After that, too much of a mineral or vitamin can cause problems.

Can you think of other examples?

In a quadratic model, we have up to _three_ terms that can be played with:

@center{@math{f(x) = Ax^2 + Bx + C}}

- (A) *Quadratic term* - this describes the amount of variation in @math{y} that is directly proportional to @math{x^2} (e.g. - the amount computed by multiplying a coefficient by @math{x^2}).
- (B) *Linear term* - this describes the amount of variation in @math{y} that is directly proportional to @math{x} (e.g. - the slope, or the amount computed by multiplying a coefficient by @math{x}).
- +(C)+ *Constant term* - just as in linear models, this is the value when @math{x} is zero (e.g. - the y-intercept of the graph).

Having three terms to play with means we can build in a lot more complexity into our model!

=== Investigate

[.lesson-instruction]
Complete @printable-exercise{model-speed-v-mpg.adoc}

=== Synthesize

* What was the highest @math{R^2} you were able to get?
* What model was that?
* Could a quadratic model be used to fit a linear relationship?
** YES! If the coefficient of the quadratic term is zero, it's equivalent to a linear model.

== Fitting Nonlinear Models @duration{25 minutes}

=== Overview

Students learn to transform the data into a linear shape, building a new column by applying a function to each row. This new data can be fit with a linear model. By applying the _inverse_ of this transformation to their linear model, they retrieve the quadratic model.

=== Launch


=== Investigate



=== Synthesize

