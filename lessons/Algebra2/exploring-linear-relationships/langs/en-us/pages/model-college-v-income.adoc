= Fitting a Model: College Degrees v. Income
++++
<style>
.studentAnswerMedium { min-width: 8em !important; }
td { padding: 0 !important; }
</style>
++++

For this page, you'll need to the @online-exercise{https://code.pyret.org/editor#share=10bWYM4rOq_ZshtX6_M-xf-bPbfz61rd1, State Demographics Starter File} open on your computer. If you haven't already, select **Save a Copy** from the "File" menu to make a copy of the file that's just for you.

== Build a Model from Samples

@n Make a scatter plot showing the relationship between `college-or-higher` and `median-household-income`. Let's estimate a linear model for this data!

@n Find the rows for Alabama (AL) and Alaska (AK), and record their x- and y- values below:

@center{
 @fitbruby{10em}{@ifsoln{22.6}}{AK college-or-higher}, @fitbruby{10em}{@ifsoln{43253}}{AK median-household-income} @hspace{10em} @fitbruby{10em}{@ifsoln{27.5}}{AL college-or-higher}, @fitbruby{10em}{@ifsoln{70760}}{AL median-household-income}
}

@n Using the two points above, define your linear model in Function Notation and Pyret by filling in the blanks below.

@center{
 @math{f(x) =} @fitbruby{8em}{@ifsoln{@math{5613.67}}}{slope}x + @fitbruby{8em}{@ifsoln{-83613}}{y-intercept} @hspace{5em} @show{(code '(define (f x) (+ (* (?ANS 5613.76) x) (?ANS -83613))))}
}

@n Type your function into the Definitions Area on the left, and click "Run". Make sure you fix any errors or warnings. In the Interactions Area, try plugging in the `college-or-higher` value for Alabama by typing `f(22.6)`. Does it closely predict the right median income for Alabama? What about Alaska? Consider: If it doesn't predict it perfectly, why might that be?

@n Try plugging in different `college-or-higher` values from _other_ states, to see how well a model based only on Alabama and Alaska fits the rest of the country. For what state does this model work well? @fitb{5em}{} For what state does it work poorly? @fitb{5em}{}

== Fit the Model

@n Evaluate @show{(code '(fit-model states-table "state" "college-or-higher" "median-income" f))} in the Interactions Area. In the upper left corner, you'll see that it says "R-sqr", followed by a number. What is that number? @fitb{}{@ifsoln{-15.63}}

@n Change the definition of `f` so that the slope is _negative_ and click "Run". What is the @math{R^2} value now? @fitb{}{}

@n Change the definition of `f` so that it draws a horizontal line. What is the @math{R^2} value? @fitb{}{}

@n What do you think @math{R^2} tells us? @fitb{}{@ifsoln{It measures how well the model fits the data}}

== Build a Model through Trial {amp} Error

@n Try using Massachusetts (row 21) and Nevada (row 28) instead of Alabama and Alaska. What @math{R^2} do you get? @fitb{}{@ifsoln{2.84}}

@n What is the @math{R^2} for **the best model you can come up with**? @fitb{5em}{} Write the model below.

@center{
 @math{f(x) =} @fitbruby{8em}{}{slope}x + @fitbruby{8em}{}{y-intercept} @hspace{5em} @show{(code '(define (f x) (+ (* (?ANS "will vary") x) (?ANS "will vary"))))}
}

== Build a Model Computationally

@n Evaluate @show{(code '(lr-plot states-table "state" "college-or-higher" "median-income"))}. What is @math{R^2}? @fitb{5em}{@ifsoln{}}

@n On the line below, write the optimal linear model that was computed through linear regression:

@center{
 @math{f(x) =} @fitbruby{8em}{@ifsoln{@math{1142}}}{slope}x + @fitbruby{8em}{@ifsoln{20868.14}}{y-intercept} @hspace{5em} @show{(code '(define (f x) (+ (* (?ANS 1142) x) (?ANS 20868.14))))}
}

