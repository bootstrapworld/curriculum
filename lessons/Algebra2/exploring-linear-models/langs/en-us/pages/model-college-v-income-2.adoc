= Fitting a Model: College Degrees v. Income (2)
++++
<style>
.studentAnswerMedium { min-width: 8em !important; }
td { padding: 0 !important; }
body.workbookpage .fitbruby { padding-top: 1.1rem; }
.center { padding: 0; }
</style>
++++

For this page, you'll need to the @starter-file{alg2-states} open on your computer. If you haven't already, select **Save a Copy** from the "File" menu to make a copy of the file that's just for you.

== Build a Model through Trial {amp} Error

**Let's build a model using Massachusetts and Nevada, instead of Alabama and Alaska.**

@n In the `# Define some rows` section, look closely at the definitions for `alaska` and `alabama`. **Add two new definitions** for MA (row 21) and NV (row 28).

@n Record the `college-or-higher` and `median-income` values for MA and NV, as (x,y) pairs below:

@center{
 (@fitbruby{10em}{@ifsoln{22.6}}{MA college-or-higher}, @fitbruby{10em}{@ifsoln{43253}}{MA median-income}) @hspace{10em} (@fitbruby{10em}{@ifsoln{27.5}}{NV college-or-higher}, @fitbruby{12em}{@ifsoln{70760}}{NV median-income})
}

@n The slope of the line between these two points is @fitb{12em}{@ifsoln{}}, and the y-intercept is @fitb{}{@ifsoln{}}

@n Now that you have the slope and y-intercept, write the complete MA-NV model below:

@center{
 @math{g(x) =} @fitbruby{8em}{@ifsoln{5613.67}}{slope}x + @fitbruby{8em}{@ifsoln{-83616.02}}{y-intercept} @hspace{5em} @show{(code '(define (g x) (+ (* (?ANS 5613.67) x) (?ANS -83616.02))))}
}

@n Define the function in Pyret, then fit the model to the data. What @math{R^2} do you get? @right{@fitb{10em}{@ifsoln{2.84}}}

@n **Two other states that would form a better model are** @fitb{15em}{} and @fitb{}{}

@n In the `# Define some rows` section, **add two new definitions** for these states.

@n Record the `college-or-higher` and `median-income` values for these states, as (x,y) pairs below:

@center{
 (@fitbruby{10em}{}{college-or-higher}, @fitbruby{10em}{}{median-income}) @hspace{10em} (@fitbruby{10em}{}{college-or-higher}, @fitbruby{12em}{}{median-income})
}

@n The slope of the line between these two points is @fitb{12em}{}, and the y-intercept is @fitb{}{}

@n Now that you have the slope and y-intercept, write the model below:

@center{
 @math{g(x) =} @fitbruby{8em}{}{slope}x + @fitbruby{8em}{}{y-intercept} @hspace{5em} @show{(code '(define (h x) (+ (* (?ANS "varies") x) (?ANS "varies"))))}
}

@center{**What if your model didn't have to pass through any two states? **}

@n Adjust your model to get the **best @math{R^2} possible.**  What did you get? @right{@fitb{10em}{}}

@n Write the best model below:

@center{
 @math{f(x) =} @fitbruby{8em}{}{slope}x + @fitbruby{8em}{}{y-intercept} @hspace{5em} @show{(code '(define (f x) (+ (* (?ANS "will vary") x) (?ANS "will vary"))))}
}

== Build a Model Computationally

`lr-plot` computes the __optimal linear model__ using all of the data points.

@n Evaluate @show{(code '(lr-plot states-table "state" "college-or-higher" "median-income"))}. What is @math{R^2}? @fitb{5em}{@ifsoln{}}

@n On the line below, write the optimal linear model that was computed through linear regression:

@center{
 @math{f(x) =} @fitbruby{8em}{@ifsoln{@math{1142}}}{slope}x + @fitbruby{8em}{@ifsoln{20868.14}}{y-intercept} @hspace{5em} @show{(code '(define (f x) (+ (* (?ANS 1142) x) (?ANS 20868.14))))}
}

