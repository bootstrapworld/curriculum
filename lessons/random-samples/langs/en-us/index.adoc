= Randomness and Sample Size

@description{Students learn about random samples and statistical inference, as applied to the Animals Dataset. In the process, students get a light introduction to the role of sample size and the importance of statistical inference.}

@lesson-prereqs{defining-table-functions}

@keywords{}

@add-to-lang{random-rows}

[@lesson-intro-table]
|===

| Lesson Goals
| Students will be able to...

* Take random samples from a population
* Understand the need for random samples
* Understand the role of sample size

| Student-facing Lesson Goals
|

* Let's explore how random sampling can be used with datasets.

| Materials
|[.materials-links]
@ifproglang{pyret}{
* @link{https://docs.google.com/presentation/d/1ZRxZgSJssoLzHe_a59Qw49mip0pwzcM-wVHqWTS8jTk/, Lesson Slides}
}
@ifproglang{codap}{
* @link{https://docs.google.com/presentation/d/1-r7mOckg3eHfpu4HueXl4yHxdwJmrN5B1ZXm4pLul48/edit?usp=sharing, Lesson Slides}
}

@material-links

| Preparation
| @preparation

|===

== Flip the Script: Inference v. Probability @duration{30 minutes}

=== Overview
Suppose you have a bag of 50 red and 50 blue marbles, and you select 10 of them at random.

- Would you be surprised if you got exactly 5 of each color?
- What if you got 6 red and 4 blue?
- What if you got 7 red and 3 blue?
- 8 red and 2 blue?
- 9 red and 1 blue?
- 10 red marbles, and no blue ones?

Suppose you flip a coin and get heads twice in a row. Would you be suspicious? How many heads in a row would you need to see before you suspect that the coin is rigged?

Humans have a natural intuition for _probability_ - it's this sense that makes us suspicious if a game is rigged, because have a sense for the outcomes that are likely and unlikely.

When we take a random sample of marbles, coin flips, or animals in a shelter, we have a sense for what the expected outcome should be. Suppose someone tells us they know the entire population at the animal shelter, and that half the animals are dogs. But what happens if we take a random sample of 20 animals and they're _all cats?_

[.lesson-instruction]
Solicit answers from students. We either had a freak sample (it's techically _possible_, but highly unlikely), or this person was lying about the population!

In real life we typically don’t know what’s true for an entire population. We can't ask everyone in the US who they're voting for, but we can __ask a sample.__ If that sample is random, we can reason about the whole population. This is like drawing lots of samples from a bag of marbles, and all of your samples have almost the same number of red and blue marbles. We can _infer_ that the bag probably has an equal number of both colors, too!

Statistical inference involves looking at a sample and trying to __infer something you don’t know__ about a larger population. This means running our sense of probability in reverse: we don't know what's in the bag, but we can make a guess based on our samples.

=== Launch
[.lesson-point]
Inference Reasons Backwards; Probability Reasons Forwards

One of the most useful tasks in Data Science is using sample data to _infer_ (guess) what’s true about the larger population from which the sample was taken. This process, called @vocab{statistical inference}, is used to gain information in practically every field of study you can imagine: medicine, business, politics, history; even art! Early on, statisticians discovered that _random_ samples almost always work best.

Suppose we want to estimate what percentage of all Americans plan to vote for a certain candidate. We can't ask everyone who they’re voting for, so pollsters instead take a _sample_ of Americans, and _generalize_ the opinion of the sample to estimate how Americans as a whole feel. But choosing a sample can be tricky...

[.lesson-instruction]
* Would it be problematic to only call voters who are registered Democrats? To only call voters under 25? To only call regular churchgoers? Why or why not?
* How could we choose a representative subset, or _sample_ of American voters?
* Would it be problematic to only sample a handful of voters? What do we gain by taking a larger sample?

[.lesson-point]
Before we infer something _unknown_ about a population from a sample, we need to know what makes a "good" sample!

Sampling is a complicated issue. The main reason for doing inference is to guess about something that’s _unknown_ for the whole population. But a useful step along the way is to practice with situations where we happen to _know_ what’s true for the whole population. As an exercise, we can keep taking random samples from that population and see how close they tend to get us to the truth. Another discovery (besides the value of randomness) that statisticians made early on was something that’s perfectly consistent with common sense: Larger samples are better than smaller ones, because they tend to get us closer to the truth about the whole population.

Let’s see what happens if we switch from smaller to larger sample sizes, if we’re taking a random sample of shelter animals to infer what’s true about the larger population...

[.lesson-instruction]
Students should open @starter-file{expanded-animals} and save a copy.

=== Investigate

The Animals Dataset we've been using is just one _sample_ taken from a very large animal shelter. @ifproglang{pyret}{How much can we infer about the whole population of hundreds of animals, by looking at just this one sample?

[.lesson-instruction]
- Divide the class into groups of 3-5 students.
- Have students open the @starter-file{expanded-animals}, save a copy and click "Run".
- Have students complete @printable-exercise{pages/sampling-and-inference.adoc}, sharing their results and discussing with the group.
- For a deeper exploration of the impact of sample size, have students complete @opt-printable-exercise{pages/predictions-from-samples.adoc}
}

@ifproglang{codap}{We're going to analyze which is better at guessing the truth about an entire population - a small sample of 10 randomly selected animals, or a large sample of 40 randomly selected animals.

[.lesson-instruction]
Select `Sampler` from the Plugins dropdown menu.

@ifproglang{codap}{@centered-image{images/sampler-plugin-default.PNG, Sample plugin default,250}}

The `Sampler` plugin features a _Mixer_, _Spinner_, and _Collector_. Today, we’ll be using the _Collector_, which chooses a specified number of cases from a dataset.

[.lesson-instruction]
What do you _notice_ about the `Sampler`? What do you _wonder_?

Possible wonderings include: How many turquoise balls are there? Why is there that amount? How many brackets are alongside the collection of turquoise balls? Why are there that many?

[.lesson-instruction]
- Select the `Options` tab of the `Sampler`.
- Which makes the most sense for our dataset: collecting cases _with replacement_ or _without replacement_?

Note: If a particular animal can be selected more than one time, then we are sampling _with replacement_.  In a drawing-names-from-a-hat scenario, we’d return each name to the hat after selecting it. If a particular animal can be selected only one time, then we are sampling _without replacement_. In a drawing-names-from-a-hat scenario, we’d remove each name from the hat after selecting it.

[.lesson-instruction]
- Designate the number of items to select and the number of samples to collect.
- What would it mean to select three samples of five items each? (These are CODAP's default settings.)
- Enter the correct specifications for 1 collection of 10 items.
-  Click `Start` to observe the sampling simulation.

After the simulation is complete, a hierarchical table (titled `experiment/samples/items`) will be populated. Ensure that students understand all the components of the new table they’ve created.

[.lesson-instruction]
- Rename the table (by clicking on its title) `small-sample`.

Now that students are comfortable using the `Sampler`, it's time to dig into the data.

[.lesson-instruction]
- Divide the class into groups of 3-5 students.
- Let students know that they want `large-sample` (on the worksheet) to be its own unique table. To produce a new table using `Sampler`, reopen the plugin rather than simply modifying the number of items.
- Have students complete @printable-exercise{pages/sampling-and-inference.adoc}, sharing their results and discussing with the group.
}

=== Common Misconceptions
Many people mistakenly believe that larger populations need to be represented by larger samples. In fact, the formulas that Data Scientists use to assess how good a job the sample does is only based on the _sample size_, not the population size.

[.strategy-box, cols="1", grid="none", stripes="none"]
|===
|
@span{.title}{Extension}

In a statistics-focused class, or if appropriate for your learning goals, this is a great place to include more rigorous statistics content on @link{https://www.khanacademy.org/math/ap-statistics/estimating-confidence-ap/one-sample-z-interval-proportion/v/determining-sample-size-based-on-confidence-and-margin-of-error, sample size}, @link{https://www.youtube.com/watch?v=SRwMfEmKx3A, sampling bias}, etc.
|===

=== Synthesize
Have students share.

[.lesson-instruction]
* Were larger samples always better for guessing the truth about the whole population? If so, how much better?
* Why is taking a random sample important for avoiding bias in our analyses?

[.strategy-box, cols="1", grid="none", stripes="none"]
|===
|
@span{.title}{Project Options: Food Habits / Time Use}


In both of these projects, students gather data about their own lives and use what they've learned in the class so far to analyze it. This project can be used as a mid-term or formative assessment, or as a capstone for a limited implementation of Bootstrap:Data Science. Both projects also require that students break down tasks and follow a timeline - either individually or in groups.

See the project descriptions for @opt-project{food-habits-project.adoc, rubric-food-habits.adoc} and @opt-project{time-use-project.adoc, rubric-time-use.adoc}.

@span{.center}{__(Based on the projects of the same name from @link{https://www.introdatascience.org/, IDS at UCLA})__}
|===
