= Putting Images Together
++++
<style>
#content .whiteBG img {background: white;}
#content .strategy-box .editbox { width: auto; }
#content .lesson-instruction .editbox {width: auto;}
</style>
++++

@description{Students investigate the function `put-image` while recreating images of flags of varying complexity. They explore image transformation and compose image functions, applying their knowledge of ratios and coordinates to scale and position shape precisely.}

@lesson-prereqs{defining-values}

@keywords{ratio, proportion, coordinate plane, proportional, scaling}

@add-to-lang{put-image}

[@lesson-intro-table]
|===

| Lesson Goals
| Students will be able to:

* Put one image on top of another, using the `put-image` function.
* Decompose complex images into parts.
* Combine and manipulate images to create more complex images.

| Student-facing Goals
|
* Let's learn how to compose images by placing one image on top of another.
* Let's make complex images like flags using code.

| Materials
|[.materials-links]



@material-links

| Supplemental Materials
|[.materials-links]
@opt-material-links

| Preparation
|
* For some students, the use of graph paper for this activity will make a big difference!


| Key Points For The Facilitator
|
* The `put-image` function treats the second image as the first quadrant of a cartesian plane. Having students sketch their flag on a sheet of graph paper drives this point home, and makes the programming easier.
* This is an excellent opportunity to introduce students to __indenting code__. The difference between poorly-indented flag code and well-indented flag code is extremely noticable.

|===

== Putting Images Together @duration{50 minutes}

=== Overview
Students learn about the `put-image` function, which uses coordinates to overlay one image on top of the other. Students practice with estimating coordinates to place a solid red circle on top of a rectangle background, in a variety of different locations. Then, students will use function composition with `put-image` in order to layer 3 or more shapes, creating more complex images.

=== Launch
As you've already seen, `overlay` sticks two images together, so that the _center_ of the first image is placed exactly on top of the _center_ of the second image. But what if we want to put the dot somewhere besides the center?

The `put-image` function works like `overlay`, but instead of placing the centers of each image on top of one another, it _translates_ the center of the top image by some distance in the x- and y-direction.

@lesson-point{
Think of the background image as a sheet of graph paper with the @vocab{origin} (0,0) in the bottom left corner.

The numbers in `put-image` specify a point on that graph paper, with the center of the top image being placed there.
}

@lesson-instruction{

- On @printable-exercise{japan-estimating-coordinates.adoc}, the code beneath each image is missing the x and y coordinates to place the dot.
- Estimate the x- and y-coordinate of the dot's location for each image to complete the code!
}
@strategy{
@span{.title}{Why is it so Hard to Center a `triangle`?}

We can think about using `put-image` the same way we think about making a collage: we "grab" an image by holding it at a specific point, then place is atop another image. In this example, x- and y-coordinates we use with `put-image` are describing where _that specific point_ lies on the background. For the red circle on @printable-exercise{japan-estimating-coordinates.adoc}, we are picking up the image by it's _center_. The same is true for squares, rectangles, and many other shapes.

But not all shapes are so intuitive! Stars and triangles, for example, are not "grabbed" by the center of their shapes. Instead, they are "grabbed" by the center of their _bounding box_. A bounding box is the tightest possible rectangle that can be drawn around an image. Try drawing a triangle on a piece of paper, and draw a dot it's center. Then, draw a rectangle so that all three points touch the edges. You'll find that the center of the bounding box is not the same as the center of the triangle!
}
=== Investigate

Now that we've had practice estimating coordinates, we are going to use `put-image` in Pyret to reposition the solid red circle of the Japanese flag to the correct coordinates.

@lesson-instruction{
- Open the @starter-file{flags} and click "Run".
- Complete the first section @printable-exercise{put-image-investigate.adoc}
}

The programmer who wrote the @starter-file{flags} included a series of special lines in this file - called @vocab{comments} - that will never be read by the computer.

@lesson-point{
Professional programmers use comments __all the time!__
}

Professional programmers work with teams who need to be able to follow each other's thinking in order to collaborate efficiently. Comments are a way for programmers to leave notes for one another, and even for a single programmer to keep track of their thinking when _they_ come back to their code another day.

@lesson-instruction{
- Open the @starter-file{flags-2} and click "Run".
- Complete the second section of @printable-exercise{put-image-investigate.adoc}.
}


@teacher{Once you've discussed the code for the flag of the Netherlands with your class, have students keep working with the starter file to write code for the flags of Ireland and Mauritius.  Some students will make it through the challenges. Some students may only complete one flag. All of them will be synthesizing how to apply put-image and locate images on the coordinate grid.}

At this point, we've built flags that are composed primarily of rectangles. Let's see if we can build a flag with more complexity - Puerto Rico's flag.

The @starter-file{flags-pr} generates a jumbled pile of shapes. We'll need to fix the code by resizing, rotating, and correctly locating the components on the background in order to compose an image that looks like the original flag.

@lesson-instruction{
- Open @starter-file{flags-pr} and complete the Do Now section (line 9).
- `puerto-rico-flag` is the target image, where as `puerto-rico` includes all of the shapes needed - but they are incorrectly positioned and they are the wrong color and/or size.
- With your partner, work through the remainder of the starter file until `puerto-rico` and `puerto-rico-flag` are identical.
}

=== Synthesize

Could we completely replace `overlay` with `put-image`? Why or why not?

Which flags were the easiest to make? The hardest?

Why is it useful to define each part of the flag first, before stitching the images together?

@strategy{
@span{.title}{Going Deeper}

If you have time, we have lots of additional starter files to push student thinking linked in the additional exercises at the end of this lesson and now would be the time to dive into them!
}

== Additional Exercises

- @opt-starter-file{flags-ak} - For a quick dive into why it’s more efficient to @vocab{define} shapes before building the image.

- @opt-starter-file{flags-lebanon} - For practice @vocab{scaling} imported graphics.

- @opt-starter-file{flags-mx} - Similar to the Puerto Rico Flag Starter File, but this one involves an imported image.

- @opt-starter-file{flags-trinidad} - If you’ve already studied Pythagorean Theorem and are ready to apply it.

- @opt-starter-file{flags-turkey} - For a fun function-composition puzzle.

