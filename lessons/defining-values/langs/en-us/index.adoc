= Defining Values

@lesson-description{Students learn how to define names for computed values. These names can be used repeatedly in different situations, just like variables in math.}

[@lesson-intro-table]
|===
@prereqs-stds{contracts}
| Lesson Goals
| Students will be able to:

* Define variables of various types
* Simplify a complex expression by replacing repeated parts with defined names,
* Explain why @vocab{variable}s are useful in math and programming

| Student-facing Goals
|
* I can define names for @vocab{values}, generated by computed expressions
* I can clean up complex code by defining repeated expressions
* I can explain why variables are important

| Materials
|[.materials-links]

@ifproglang{wescheme}{
* @link{https://docs.google.com/presentation/d/1dgr_LYF3Biy9SdMfcyLAjys3n9sQxOllUu2G8ckvaSg/, Lesson Slides}
}
@ifproglang{pyret}{
* @link{https://docs.google.com/presentation/d/1zgDTad1HMqJ6hhqsyNl46KS802NLepFgX0Q_ATls0KQ/, Lesson Slides}
}

@material-links


| Preparation
|
* Make sure all materials have been gathered
* Decide how students will be grouped in pairs

| Key Points For The Facilitator
|
* Learning how to define values is a big milestone! It will be used consistently throughout other lessons, so be sure to give students plenty of time to practice this new skill.
* Check frequently for understanding of @vocab{data types} and @vocab{contract}s during this lesson and throughout subsequent lessons.

* Students will use their Contracts page frequently, so it should be kept in an accessible, convenient location.

@lang-prereq

|===

[.old-materials]
Click here to see the @link{https://www.bootstrapworld.org/materials/spring2020/courses/algebra/en-us/units/unit3/index.html, prior unit-based version}.

== What's in Common? @duration{30 minutes}

=== Overview
This activity introduces the problem with duplicate code, leveraging *Mathematical Practice 7 - Identify and Make Use of Structure*. Students identify a common structure in a series of expressions, and discover how to bind that expression to a name that can be re-used.

@ifproglang{pyret}{Note that in Pyret definitions work the way variable substitution does in math, as opposed to variable assignment you may have seen in other programming languages.}

=== Launch

Take a look at the expressions below:

@ifproglang{wescheme}{

```
(star 50 "solid" "green")
(scale 3 (star 50 "solid" "green"))
(scale .5 (star 50 "solid" "green"))
(rotate 45 (star 50 "solid" "green"))
(rotate 45 (scale 3 (star 50 "solid" "green")))
```

- *What code do they all have in common?*
`(star 50 "solid" "green")`
}

@ifproglang{pyret}{
```
star(50, "solid", "green")
scale(3, star(50, "solid", "green"))
scale(0.5, star(50, "solid", "green"))
rotate(45, star(50, "solid", "green"))
rotate(45, scale(3, star(50, "solid", "green")))
```

- *What code do they all have in common?*
`star(50, "solid", "green")`
}

- *What would happen if you were asked to change the color of all the stars to gold?*
_We'd have to change it everywhere it appeared._

[.lesson-point]
Duplicate code is almost always bad!

There are lots of potential problems with duplicate code:

- *Readability:* The more code there is, the harder it can be to read.
- *Performance:* Why re-evaluate the same code a dozen times, when we can evaluate it _once_ and use the result as many times as we need?
- *Maintainability:* Suppose we needed to change the size of the stars in the examples above. We would have to make sure every line is changed, which leaves a lot of room for error.

Since we're using that star over and over again, wouldn't it be nice if we could define a "nickname" for that code, and then use the nickname over and over in place of the expression? And then, if we wanted to change something about all of the stars, we would only have to make the change once, in the definition.

--
You already know how to do this in math:

[.indentedpara]
@math{x = 4} _defines_ the nickname @math{x} to be the value 4.
--

@ifproglang{wescheme}{
--
WeScheme uses the word "define" to make this even clearer!

[.indentedpara]
We can type `(define x (4))` to define `x` to be the value 4.
--
}

@ifproglang{pyret}{
--
Pyret is no different!

[.indentedpara]
We type `x = 4` to define `x` to be the value 4.
--
}

Once we've defined `x` to be the value 4 and clicked "run", anytime we use `x`, the computer will remember that it is _defined_ as 4.  We can _use_ that definition to get an answer. For example, @math{x + 2} will evaluate to 6.

Of course, the whole point of defining a value is so that it sticks around and can be used later! That's why programmers put their definitions on the _left-hand side_, known as the @vocab{Definitions Area}.

=== Investigate



[.lesson-instruction]
- Open the @ifproglang{wescheme}{@online-exercise{https://www.wescheme.org/openEditor?publicId=Dus6Kaigy6, Defining Values Starter File}} @ifproglang{pyret}{@online-exercise{https://code.pyret.org/editor#share=1dmCVwizoarLFep2-WkCH0PQKacB3MSql&v=04918ef, Defining Values Starter File}} and complete the notice and wonder exercise on @printable-exercise{pages/defining-values-explore.adoc} with your partner.
- Complete the remaining questions and add some defintions of your own in the definitions area. Be sure to click *Run* again before you try testing them out.

=== Synthesize

- *What data types can we define values for?*
_All of them - Number, String, Image_

- What values did you decide to define? When might they be useful?


[.strategy-box, cols="1", grid="none", stripes="none"]
|===
|
@span{.title}{Support for English Language Learners}

MLR 8 - Discussion Supports: As students discuss, rephrase responses as questions and encourage precision in the words being used to reinforce the meanings behind some of the programming-specific language, such as "define" and "value".
|===

== Using Defined Values

=== Overview
Now that we know _how_ to define values, we've got two more things to consider:

* When it would be _useful_ to define them
* How to _use_ them once we have

=== Launch

Have students open to @printable-exercise{chinese-flag.adoc}. It will direct them to open the
@ifproglang{wescheme}{@online-exercise{https://www.wescheme.org/openEditor?publicId=Vl5yocVoU4, Chinese flag Starter File}
}
@ifproglang{pyret}{@online-exercise{https://code.pyret.org/editor#share=1zfp_NOVn5MU6CBX7_r6U1zYwseNzZw06&v=04918ef, Chinese flag Starter File}
} once they complete the first half of the questions on the page.

=== Investigate

- Have students open the editor and type @show{(sexp->code '(radial-star 30 20 50 "solid" "yellow"))} into the interactions area and click run.
- Have students work in the Definitions area to define a value `sun` to be the image @show{(sexp->code '(radial-star 30 20 50 "solid" "yellow"))}.

[.lesson-instruction]
--
- Turn to @printable-exercise{pages/coe-why-define-values.adoc}.  The first row of the table has been completed for you. Could I get a volunteer to explain what they see happening in that first row?
--

- Have students complete the page and test their code in the editor.

=== Synthesize

- *Why is defining values useful?*
_Lets the programmer reuse code, saves time, lets the programmer make changes easily, allows us to more easily use elements inside other functions_

[.strategy-box, cols="1", grid="none", stripes="none"]
|===
| @span{.title}{Optional: Fun with Flags!}
Now that students have learned how to define values, you may want to give them an opportunity to practice.  Our @ifproglang{wescheme}{@link{../../../algebra-wescheme/lessons/flags/, Flags lesson}} @ifproglang{pyret}{@link{../../../algebra-pyret/lessons/flags/, Flags lesson}} dives deeper into image composition and includes some starter files specifically focused on cleaning up code by defining values.
|===

== Additional Exercises:

* @printable-exercise{pages/writing-code-using-defined-values.adoc}
@ifproglang{wescheme}{
* @opt-online-exercise{https://teacher.desmos.com/activitybuilder/custom/5ff46882e3b4660c751f707e?collections=5fbecc2b40d7aa0d844956f0, Matching Code to Images using overlay & put-image}
}
@ifproglang{pyret}{
* @opt-online-exercise{https://teacher.desmos.com/activitybuilder/custom/5fc90f1289c78e0d2a5bccfc, Matching Code to Images using overlay & put-image}
}

