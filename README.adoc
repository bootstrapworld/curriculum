:toc:
:toclevels: 4

= READ ME

We describe here the directories and files in the `curriculum`
directory, and how to use the programs provided.

For a generated document tree, please see
https://bootstrapworld.org/materials/fall2021

== Structure of the `curriculum` directory

The top directory contains a bunch of scripts and subdirectories.

The curriculum content is placed in the subdirectories `lessons`
and `pathways`. `lessons` contains individual lessons, including
the lesson plan, exercises, and workbook pages. `pathways`
contains pathway directories, each of which defines a collection
of lessons. (It is possible for a lesson to occur in multiple
pathways.)

The subdirectories `lib` and `shared` contain the components of
the program used to generate web pages and PDFs from the
`lessons` and `pathways`. `shared` contains directories named for
the various natural languages used for instruction, e.g., `en-us`
for US English, and `es-mx` for Mexican Spanish. Inside these
dwell centralized educational-standards dictionaries, e.g.,
`csta-standards-dictionary.rkt` for a list of standards defined
by the CSTA. Also present is a general glossary of terms used in
the lessons: `glossary-terms.rkt`.

The main script is `build-pathway` which takes a pathway name and
constructs the web pages and PDFs for it in a directory called
`distribution`.

Here is a skeleton of the `curriculum` tree, showing the salient
files, with a sample lesson and sample pathway:

  curriculum/
    build-pathway
    lib/
      <language-independent implementation files>
      *.rkt
      *.css
      glossary-terms.rkt
      glossary-terms-ss.rkt
    shared/langs/
      en-us/
        <language-dependent implementation files, such as>
        *.rkt
        *.css
        Badges/*.{jpg,png}
        docroot/*.{html,png}
        images/*.png
        practices/*.rkt
        standards/*.rkt
        textbooks/*.rkt
        <pathway-agnostic, non-lesson docs>
        pathway-independent/*
    lessons/
      sample-lesson/
        langs/
          en-us/
            proglang.txt (optional)
            shadow-glossary.txt (optional)
            index.adoc
            slides.md
            images/
            pyret/
            wescheme/
            pages/
              *.{adoc,pdf}
              workbook-pages.txt
              pyret/
              wescheme/
            solution-pages/
              *.{adoc,pdf}
              pyret/
              wescheme/
            xtra/
              *.{adoc,pdf}
              pyret/
              wescheme/
    pathways/
      sample-pathway/
        langs/
          en-us/
            proglang.txt (optional)
            index.adoc
            lesson-order.txt
            external-index.rkt
            front-matter/
              pages/
                *.{adoc,pdf}
                workbook-pages.txt
              solution-pages/
                *.adoc
                workbook-pages.txt
            back-matter/
              pages/
              solution-pages/
            resources/
              index.adoc

Some standard subdirectory names are used to separate and shadow
content based on (natural) language of instruction, the
programming language used, or whether content is being built for
student or teacher. Thus:

- The `langs` subdirectory uses further subdirectories, e.g.,
`en-us` for US English and `es-mx` for Mexican Spanish. Source
documents from the relevant natural language are chosen based on
the `--language` option chosen during build. The default is
`en-us`. In order to ease transition, if a language other than
`en-us` is chosen, any content unavailable in the new language is
filled in by what’s in `en-us`.

- Some of the directories have `pyret` and `wescheme`
subdirectories or both. These contain content that should shadow
the default content (one directory level up) if that
programming language is used. Specify this choice via the
`--proglang` option during build. The default is usually `pyret`,
but in some cases content is built for both `pyret` and
`wescheme`.

- The directory `solution-pages` is used to house source
that will shadow `pages`, when the pages meant only for
teacher use are created.  Similarly,

In all these cases, it is important that the shadowing content
have the same file basename as the content that is being
shadowed. Extensions can vary; thus it is possible for
`filename.pdf` to shadow `filename.adoc` and vice versa.

=== Structure of a lesson directory

Each lesson has a subdirectory, e.g., `sample-lesson`, under the
`lessons` directory.

A lesson plan is specified by an `.adoc` file in the language
directory for that lesson, e.g.,
`sample-lesson/langs/en-us/index.adoc`. While the file basename
doesn’t
have to be `index`, ensure that there is only one `.adoc` file at
this level.

Images are in
subdir `images`.

Single workbook pages are in subdirs `pages`
and `solution-pages` (some of these can be static PDFs
rather than adoc source files).
(The `solution-` versions, as already explained, are meant to supply
shadowing content intended for teacher-only documents.)

The file `pages/workbook-pages.txt` lists
the pages -- one per line -- in the
`pages` directory in the order in which they should show up in the
final workbook. By default,
these pages are rendered in portrait mode. If you desire a
particular file `file.adoc` to be in landscape, its entry line in
`workbook-pages.txt` should be `file.adoc landscape` rather
than just `file.adoc`. (The
entry `file.adoc` is convenient shorthand for `file.adoc
portrait`.)  (The words `landscape` and `portrait` may
be in any case.) Supplementary `adoc` files used by these pages
can be stored in subdirectories, typically named `fragments`.

Lesson pages are paginated by default when they show up in the
workbook. If you don’t want a page to be populated, its entry
line in `workbook-pages.txt` should be `file.adoc portrait
nopagenum`. (The aspect should also be mentioned, even if it’s
the default.)

(Any of the components in an entry line in `workbook-pages.txt`
may be enclosed in double-quotes.)

=== Structure of a pathway directory

Each pathway has a subdirectory, e.g., `sample-pathway`, under the
`pathways` directory.

A pathway narrative is specified by an `.adoc` file in the
language directory for that pathway, e.g.,
`sample-pathway/langs/en-us/index.adoc`. The file basename
doesn’t have to be `index`, but there should be only one `.adoc`
file in this directory.

There can also be a file `external-index.rkt` used to expand
pointers to URLs in the pathway narrative (see below).

In the same directory, the file `lesson-order.txt` lists
the names of the lessons (e.g., `sample-lesson`)
that should be included in the
pathway, in the order in which they should appear in the pathway
workbook. (The filename can be enclosed in double-quotes.)

The pathway directory can also contains a `resources`
subdirectory, where an `.adoc` file describes the “Teacher
Resources” page. There should be only one such `.adoc` file, but
it can be named anything (not necessarily `index.adoc`).

== The `build-pathway` script

The top dir contains the script `build-pathway`. It takes any
number of pathway arguments (including none), and any combination of the
following command-line options:

- `--book` (aka `--pdf` or `-b`)
- `--debug` (aka `-d`)
- `--expanded-warnings` (aka `-w`)
- `--force` (aka `-f`)
- `--help` (aka `-h`)
- `--lint` (aka `--verify-links` or `-l`)
- `--natlang` (aka `--language`)
- `--noparallel` (aka `--no-parallel`)
- `--nopdf` (aka `--no-pdf` or `-n`)
- `--proglang`
- `--slides` (aka `-s`)
- `--superforce` (aka `--super-force` or `-F`)
- `--version` (aka `-v`)

If called with `--help` or `--version`, the script
displays a help message and version information, respectively, and quits.

Otherwise, the script creates a document tree under the `distribution`
directory for every pathway argument. A pathway arg can be either the pathway
name, or its relative pathname from the `build-pathway` script, with or without
a trailing slash, e.g., all of the following refer to the same pathway:

  sample-pathway
  pathways/sample-pathway
  pathways/sample-pathway/

If no pathway arg is supplied,
`build-pathway` generates doctrees for every pathway in
`pathways`.

If no `--natlang` option is supplied, the prose language used is
`en-us`. To specify another language, say `es-mx`, use
`--natlang es-mx`.

The doctree for the built pathway (e.g., `data-science`) for the prose language `en-us`,
resides in
`distribution/en-us/courses/`. Thus:

    distribution/
      en-us/
        courses/
          sample-pathway/
            index.shtml
            workbook/
              workbook.pdf
              workbook-long.pdf
              opt-exercises.pdf
            resources/
              protected/
                workbook-sols.pdf
                workbook-long-sols.pdf
                opt-exercises-sols.pdf

Here `index.shtml` is the web page corresponding to the pathway
narrative. The student workbooks in `workbook/` are

- `workbook.pdf`, the basic student workbook
- `workbook-long.pdf`, above plus the optional exercises
- `opt-exercises.pdf`, just the optional exercises

The teacher workbooks in `resources/protected` are

- `workbook-sols.pdf`, the basic teacher workbook, i.e., with solutions
- `workbook-long-sols.pdf`, above plus the optional exercises
- `opt-exercises-sols.pdf`, just the optional exercises

These filenames are standards and do not vary with pathway. Their location
identifies which pathway they describe.

If no `--proglang` option is supplied, the progamming language is
assumed to be `pyret`. Other possible values for the option are
`wecheme`, `codap`, and `spreadsheets`.
The distribution directory for a pathway built with
a non-``pyret`` proglang typically tacks on the proglang as suffix.

Note that many workbook PDFs can be created: the students' versions
are created
in the `workbook` directory; the teachers' versions in
the “protected” directory
`resources/protected`.

Pages under `resources/protected` may prompt you for a teacher
password, which is available on signing up with Bootstrapworld.

The lessons referred to by the various pathways reside in
`distribution/en-us/lessons/`. Thus:

     distribution/
       en-us/
         lessons/
           sample-lesson/
             index.shtml
             pages/
             solution-pages/

The pathway-agnostic lessons in
`shared/langs/en-us/pathway-independent` are converted and placed in
`distribution/en-us/lessons/.pathway-independent`.

The `build-pathway` option `--slides lessonA` additionally generates the slide deck
for lesson `lessonA`, by calling `build-slide lessonA`. For more details, see
link:./README-slides.adoc[].

The pathway narrative web page `index.shtml` includes a link to
`pathway-lessons.shtml`, which contains all the lesson plans
associated with the pathway; the student
PDF; a page listing the standards met; and a glossary
page for the terms used in the lessons.

=== `build-pathway` debugging

The other options of `build-pathway` are predominantly used for
debugging:

- `--debug` runs in debug mode, i.e., it retains various temp files in the
  generated doctree, so they can be inspected to help debugging. Note that like
  all acts of measurement, running in debug mode results in a system subtly
  different from non-debug mode, and may actually hide some bugs. Use with
  circumspection.

- `--expanded-warnings` shows the diagnostics as
  long scroll instead of overwriting them.

- `--force` forces creating anew the document tree. By default,
  in order to save time,
  conversions are skipped if the `distribution` already contains
  the required target files and they are sufficiently new.

- `--lint` reports missing rows in the summary tables of lesson
  plans, and invalid links in the doctree.

- `--noparallel` runs the build script
  strictly sequentially, without exploiting parallelism. This may
  be used to uncover bugs introduced by parallelism.

- `--book` is needed to generate PDFs for every page and solution-page, and merges them
  into the workbook PDFs.

These options set some internal environment variables in the `build-pathway`
script. `build-pathway` also looks into an init file `.build-pathway.env`, if
it exists, where these internal variables may be set directly in lieu of giving
them as command-line options. The variables governed by the options `--book`,
`--debug`, `--noparallel` and `expandedwarnings` are `BOOK`, `DEBUG`,
`NOPARALLEL` and `EXPANDEDWARNINGS` respectively.  Thus, a `.build-pathway.env`
with contents

    BOOK=1
    DEBUG=1
    NOPARALLEL=1
    EXPANDEDWARNINGS=1

is equivalent to supplying the options `--book --debug --noparallel
--expandedwarnings` when calling `build-pathway`. In the course of
experimenting, you may delete lines in `.build-pathway.env` or, more conveniently, comment
them out
using the usual shell comment character, `#`.

For instance, `BOOK=1` may be commented out during the initial phases of
adding new content, as
PDF generation is relatively time-consuming, and one often doesn't need
the PDFs until after one has thoroughly debugged the HTML output.

== Deployment

We currently deploy to:

https://www.bootstrapworld.org/materials/fall2020/courses

(The `fall2020` is in general `<semester><year>` where
`<semester>` is one of `spring` or `fall`, and `<year>` is the
4-digit year.)

After building one or pathways on your local machine, you can
deploy all relevant docs from the `distribution/` directory by typing

  deploy-to-brown jrandomuser

Here `jrandomuser` is your user ID on Brown. You will be prodded for
your Brown password, once to copy the files over and another time
to set it up on the Brown machine. (This may be compressed in the
future.)

If you wish to deploy only a single pathway, e.g.,
`data-science`, add the pathway by name as a second argument:

  deploy-to-brown jrandomuser data-science

(This assumes you've first run some variant of `./build-pathway data-science`, of
course.)

The script `deploy-to-brown` uses SSH to interact with your Brown
account. The connection has been often been flaky, so often the
second SSH fails. If this happens, in order to let you finish, without redoing the
work accomplished with the first SSH, you may type

  deploy-to-brown-perms jrandomuser

(If you used the optional second arg for `deploy-to-brown`, you
don't need to repeat it here.)

*Note:* The `algebra` pathway is an anomaly, since it exists in
both `-wescheme` and `-pyret` variants.
To type just one or the other variant, type one of

  deploy-to-brown jrandomuser algebra-wescheme
  deploy-to-brown jrandomuser algebra-pyret

To deploy both variants (if available), type

  deploy-to-brown jrandomuser algebra

In any case, `deploy-to-brown` only deploys a pathway if the
latter has been built locally first. So if you've built `algebra-wescheme` but
`algebra-pyret`, requesting `algebra` be deployed is equivalent to requesting
`algebra-wescheme`.

== Standards compliance

The file `shared/lang/en-us/lessons-and-standards.rkt` contains
an association of lessons with the educational standards they
comply with. Dictionaries for the various standards are available
in the same directory. For now, these are:

  cc-ela-standards-dictionary.rkt
  cc-math-standards-dictionary.rkt
  csta-standards-dictionary.rkt
  k12cs-standards-dictionary.rkt
  ngss-standards-dictionary.rkt
  ok-standards-dictionary.rkt
  old-standards-dictionary.rkt

The build process creates a menu for finding out the standards
complied with by the lessons and the pathway. The lesson’s menu
is embedded in the lesson plan, whereas the pathway’s (larger)
menu is linked to.

The directive `@lesson-prereqs{}` is used as a placeholder in a
table for row(s) that include lesson prerequisites (if any) and
standards. (The mode of inclusion may change in subsequent
versions depending on how predictable lesson-plan formats
become. For now, we need a placeholder.)

== Git basics

Fork this repo to your GitHub account (say, `jrandomuser`). (This is done using
obvious buttons on the GitHub page.)

In your terminal, clone your fork thusly:

   git clone https://github.com/jrandomuser/curriculum

This will create a local repo where you can try things, change
things, etc. But first, to retain connection with the original do:

  git remote add upstream https://github.com/bootstrapworld/curriculum

Every time the original changes, update like so:

  git fetch upstream
  git merge upstream/master

You are probably in your own `master` branch. Even if you’re
“branching out” to other new branches, the above merge will
mostly work.  “Mostly” because merge often triggers conflicts
depending on how far you have diverged from the original. At the
very least, make sure you’ve checked in all your changes that you
care about, before you attempt a merge. For changes you aren’t
ready to check in, save the concerned files somewhere else, and
make sure there are no “modified” files in your directory.

=== Creating your private branch in the original repo

Alternatively -- and this will work only for greenlisted members
-- clone the repo directly and add your own branch, e.g.,

  git clone https://github.com/bootstrapworld/curriculum
  cd curriculum
  git checkout -b my-sandbox

You can pull and merge from `master` as needed:

  git checkout master
  git pull
  git checkout my-sandbox
  git merge master

If conflicts arise, you will be given a way to resolve them.

== Prerequisites

The following is needed to construct documents from this repo:

* A Unix-like environment.
  - If you're already on some flavor of unix, you're there! ✅
  - If you're on Windows, you'll want to install
    https://docs.microsoft.com/en-us/windows/wsl/install[WSL2] to give yourself a Linux environment first (we recommend Ubuntu).
  - If you're on macOS, your environment is close but missing some
    tools. You'll want to install
    https://brew.sh/[Homebrew] first, then run the following commands to add them:
+
  brew install gnu-sed
  brew install curl
+

* Bash. Keeps all the scripts humming. (This is already available on Linux, macOS, and WSL) ✅

* Racket, to do preprocessing and other bookkeeping. Any version should
do. We're not using any bleeding-edge features of Racket. You'll want to
https://download.racket-lang.org/[download and install DrRacket]
and make sure the `racket` binary is in your `$PATH`.

* Asciidoctor, a Ruby program, to generate HTML from AsciiDoc.
  - on Linux/WSL: `sudo apt-get install asciidoctor`
  - on macOS: `brew install asciidoctor`

* Several node packages *all of which are installed by running `npm install`*. (Note: you will need to be running Node v14 or above!)
  - `puppeter`, and HTML -> PDF generator that converts web pages into PDF documents
  - `puppeteer-cluster` to build the hundreds of pages we have in parallel.
  - `pdf-lib`, which handles collecting all the PDFs and adding page numbers
  - `md2googleslides`, which generates slide decks from markdown files in each of the lesson plans
  - `mathjax`, which generates beautifully formatted math output

== Authoring guidelines

The `.adoc` files peppering this curriculum repo are written in
AsciiDoc overlaid with some preprocessing macros written in
Racket. AsciiDoc is a plain-text-based markup that is converted
by the Asciidoctor program into HTML (among other things, but we
don’t use those parts).

=== A brief introduction to AsciiDoc

An AsciiDoc source file typically has the extension `.adoc`, at
least in our setup.

A title (aka “level 0”) header has its line preceded by a single
equal sign.

Level 1 headers (“sections”) are preceded by two equal signs.
Similarly for “subsections” at level 2, 3, 4, 5.

  = Title at level 0

  == Section at level 1

  === Subsection at level 2

  ==== Header at level 3

  ===== Header at level 4

  ====== Header at level 5

(That's it. Headers of level 6+ are not provided for.)

Itemized lists have each item paragraph preceded by a ``*`` or
``-`` and space.

Emphasized text is set within underscores: `+_emphasized text_+`.

Bold text is set within stars: `+*bold text*+`.

In-text code fragments are set within backticks: ``++`code fragment`++``.

Code displays are on contiguous lines that are indented (amount
of indentation doesn’t matter as long it’s non-0).

Please see the
https://docs.asciidoctor.org/asciidoc/latest[AsciiDoc Language Documentation] for
the whole story. Learn just the bare minimum to get started writing,
and then learn more as needed, either from the online manual, or by bugging
me. (If something seems too tedious to learn or input, I could
perhaps add it as a Racket directive.)

If your Asciidoctor version is at least 2.0.0, you can type

  asciidoctor --help syntax

to get a brief reference guide to the syntax. To create a browsable HTML
file, do

  asciidoctor --help syntax | asciidoctor - -o help.html

and open `help.html` in your browser.

=== Racket preprocessing

The `.adoc` files we author can contain some additional markup,
which we shall call _directives_.  All directives begin with an
`@`, and, if they take arguments, the latter are encased in
braces (`{}`). Here are all the directives:

==== Glossary

Glossary items are annotated with the directive `@vocab`. E.g.,

  @vocab{function}

In a lesson plan, such items are searched in the main glossary
file, `lib/glossary-terms.rkt`, and are inserted as lists at the
head of the document.

For a pathway narrative, the glossary items from all its
constituent lessons are collected into a file
`pathway-standards.shtml` that is linked to in the narrative
page.

There can be auxiliary glossary files in `lib/` that can be used
to _shadow_ the main glossary for particular lessons. For now,
the only such shadowing glossary file is `glossary-terms-ss.rkt`,
used for Social-Studies lessons.

In order for a lesson `lessonA` to use a shadowing glossary, its
directory, i.e., `lessons/lessonA/langs/en-us`, should containing a
file `shadow-glossary.txt` that contains the name of the
shadowing glossary file.

===== Syntax of the glossary-terms.rkt file

The `glossary-terms.rkt` file (and any shadowing files) defines and
exports the
Scheme variable `*glossary-list*`, whose value is a list of glosses. Each
gloss is itself a list of sublists, where the sublist contains three
elements:

- a symbol specifying the natural language (e.g., `en-us`, `es-mx`)
- the glossed item. This can be:
** a string, e.g., `"variable"`
** a list of strings, meant to be grammatically related items, e.g., `("axis"
"axes")`. Either string can be used in the source (whatever fits the
prose flow), but the item in the generated glossary will be the first
item
** a list of sublist of strings, where each of sublist of strings is
internally
grammatically related, but the different sublists are quite different
terms, e.g., `(("mean") ("average" "ave" "avg"))`. The word in the source is used
to find the relevant sublist, and _its_ first item is used in the
generated glossary
- a string specifying the definition for the glossed item

As a convenience, it is not necessary to specify simple grammatical
declensions in the glossary file. Thus, in the glossary entry for
`"coordinate"` you don't need to tack on `"coordinates"`, although you
can call `@vocab` on either term in your source with the assurance that
they will both refer to `"coordinate"`.

For English (`en-us`), this convenience covers:

- `"-s"`, `"-es"`, `"-y/-ies"` plurals and singular present tense, e.g.,
  `"cars"` maps to `"car"`, `"boxes"` to `"box"`, `"stories"` to
  `"story"`, `"applies"` to `"apply"`
- `"-d"`, `"-ed"`, `"y/-ied"` preterites, e.g., `"saved"` maps to
  `"save"`, `"turned"` to `"turn"`, `"applied"` to `"apply"`
- `"-ing"` gerunds, e.g., `"applying"` maps to `"apply"`

Latin (the aforementioned `"axis"`/`"axes"`) and Old English plurals
(`"child"`/`"children"`) need explicit entries however; sorry!

Spanish (`es-mx`) has its own set of declension detection mechanisms.

==== Lesson descriptions and dependencies

Each lesson plan is strongly advised to start out with a

  @description{A brief paragraph describing the lesson.}

The description is displayed in the lesson plan, but is also part
of the autogenerated thumbnails used by the pathway narrative for
each of its lessons.

A lesson can optionally include a set of keywords, which are used
when searching for lesson content. While the title, description,
and standards alignment are already included in the search,
occasionally there are search terms a user might employ which are
_not_ reflected in any part of the lesson (e.g., “PEMDAS”, “GEMDAS”). These
keywords can be added anywhere in the lesson with the `keywords`
directive: `@keywords{PEMDAS, GEMDAS}`. Multiple keywords are comma-separated.

==== Exercises

Exercise files are typically recipes and have calls to one of two
directives

  @design-recipe-exercise{...}

  @assess-design-recipe{...}

The former is used to specify a correct recipe; the latter to
introduce a recipe that needs to be debugged. For examples of
such recipes, please see the `.adoc` files in the various
`fragments` subdirectories in the repo.

Some exercise files are more elaborate than recipes and contain
sketches of solutions and tables that need to be filled. These
use some extra directives like `@do`, `@show`, `@code` that then
use raw Racket code to format the exercise. Examples of
these can be found in the `Supplemental` lesson.

Sometimes, just a contract (part of a recipe) needs to be shown
in the text. Use `@show` to call the Racket procedures `contract`
(for a single contract)
or `contracts` (for multiple).

  @show{(contract "/" '("Number" "Number") "Number")}

This states that the function name is `/`, its domain list is
`("Number" "Number")` and its range is `"Number"`.

  @show{(contract "/" '("Number" "Number") "Number"
    "divides one number by another")}

adds an optional fourth argument stating the function's purpose.

To show multiple contracts,

  @show{(contracts
    '("/" '("Number" "Number") "Number" "divides one number by another")
    '("*" '("Number" "Number") "Number" "multiples one number by another")
   }

Note that `contracts` takes a list of arguments. Also note that
quoting each such argument obviates the need for quoting the
domain-list argument.

==== Cross-references and pagination

There are a clutch of directives to allow easy cross-referencing between
pages in the converted document base.

The directive `@printable-exercise` is used to refer to pages
that are part of the workbook, e.g.,

  @printable-exercise{lessonA/pages/page.adoc, link text}

If `, link text` is not supplied, the title of the page is used.
The first and second components of the pathname may be dropped in certain
cases: `lessonA/` may be dropped if the reference is made within the
same lesson. In that case, the second component, if `pages/`, may also
be dropped. (The only other possible second component is
`solution-pages/`, which cannot be dropped.) The third component may
have extension `.pdf`, `.html`, or `.adoc`. If `.adoc`, it is resolved
to `.html`.

THe directives `@opt-printable-exercise` and `@handout` are called the
same way, and are
applied to exercise pages not mentioned in the lesson's page list. (The
two are categorized differently in the collections appearing in the
pathway narrative.)

The directive `@lesson-link{...}` is a general-purpose link to any pages
within lessons, and uses pathnames relative to the
`distribution/<natlang>/lessons/` directory.

The directive `@dist-link{...}` uses pathnames relative to the
`distribution/<natlang>/`

==== Generic links

Use `@link{URL, link-text}` to refer to a generic URL
not part of the curriculum hierarchy.  The second argument for
the link text is optional.

==== Images

Use `@image{images/pic.png}` to insert the image `images/pic.png`.

Use commas to add image options, e.g.,

  @image{images/player-move.png, PlayerMovement, 400, , credit}

The second argument is the alt text, which also pops up on mouse hover.
The third and fourth arguments (which can be left empty) specify width
and height respectively. The fifth argument is used to specify credit
for the image, and is rendered to the bottom right of the image.

==== Comments

Comments can be inserted anywhere in the `.adoc` file as

  @comment{A comment}

Note that such comments _will be seen_ in the HTML source, which may be
exactly what you want, either for documentation or debugging.

If you don't want your comments to survive into the HTML, you may use
AsciiDoc's own commenting mechanism with `//` and `////` (see manual). While
these work mostly, their text is unfortunately subject to preprocessing for
directives, which may have consequences. To have truly inert comments, use

  @scrub{Everything within these braces is thoroughly scrubbed}

``@scrub``'s argument can contain plausible directives -- the only
requirement is that any braces within it should be paired. (This is
obviously needed to keep the extent of
``@scrub``'s argument recognizable.)

==== Programming language specific text

Use the `@ifproglang` directive to conditonally include a
fragment text for a specific programming language, which as
explained earlier, is usually `pyret` by default, but can be set
supplying a `--proglang` option to the build script. E.g.,

  @ifproglang{pyret}{
  This text occurs in the Pyret version of this document.
  }

  @ifproglang{wescheme}{
  This text occurs in the WeScheme version of this document.
  }

==== Adding custom CSS classes

Some standard CSS classes to emphasize certain regions of text.

Use

  [.strategy-box]
  .Header
  ****
  Rem suscipit soluta quas recusandae dolor culpa non. Iste aut
  ipsum qui eos quidem et. Debitis omnis ipsam cupiditate ut vero
  odio.
  ****

to generate a “strategy box”, a boxed text with a blue border.

Use

   [.notice-box]

to generate a “notice & wonder box”, a boxed text with a purple
border.

Add the class `.physics-table` to a table attribute to generate a
single-arg function
table, e.g., one that maps miles driven to cost.

You can add your own CSS classes or IDs. Classes are specified
with an initial dot and IDs with an initial `#`. Note that at
most one ID is meaningful, although any number of classes may be
specified. A combination of classes and ID are simply strung
together, e.g.,

   [.class1.class2.class3#onlyid]

The above works for blocks. Use `@span{classes and id}{text}` to
enclose CSS classes and/or an ID around arbitrary (i.e., in-line)
text. ``@span``s may be nested. `@span`’s first argument of
classes and ID is specified in the same way as for blocks,
without the brackets.

// vi:tw=72
